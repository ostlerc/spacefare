<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>title</title>
</head>
<body>
<script class="jsbin" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script>

String.prototype.format = function format()
{                                                                                                               
  var msg = this;
  for(var i in arguments)
    msg = msg.replace(/\{\}/,arguments[i]).replace(new RegExp('\\{'+i+'\\}','g'),arguments[i]);
  return msg;
}

function populateStarships(data) {
    $.each( data, function( key, val ) {
        $("#ss_list").append(
            '<li cost="{0}">cost: {0} name: <a href="spaceship.html?url={1}">{2}</a></li>'.format(
                val['cost_in_credits'],
                encodeURIComponent(val['url']),
                val['name']
                ));
    });
}

function loadStarshipURL(url) {
    $.getJSON(url, function( data ) {
        populateStarships(data['results']);
        if(data['next']) {
            loadStarshipURL(data['next']);
        }
    });
}

$(document).ready(function(){
    loadStarshipURL("http://swapi.co/api/starships/");
});

</script>

<ol id="ss_list", class="list"/>

</body>
</html>
